{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header">Configure Archetypal Analysis</div>
    <div class="card-body">
        <div class="mb-3">
            <label>Number of Archetypes (k)</label>
            <input type="number" id="k-input" class="form-control" value="{{ n_archetypes }}">
            <small class="text-muted">Usually between 3 and 8.</small>
        </div>
        <button onclick="runAnalysis()" class="btn btn-primary" {% if busy %}disabled{% endif %}>
            Run Analysis
        </button>
    </div>
</div>

<script>
function runAnalysis() {
    const k = document.getElementById('k-input').value;
    fetch('/run_analysis', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'k=' + k
    }).then(r => r.json());
}
</script>
{% endblock %}